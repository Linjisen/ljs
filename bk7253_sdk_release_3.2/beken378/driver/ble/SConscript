from building import *

cwd  = GetCurrentDir()

src_pub = []
src_lib = []
src_lib += ["ble_lib/ip/ahi/src/ahi.c"]
src_lib += ["ble_lib/ip/ahi/src/ahi_task.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapc/gapc.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapc/gapc_hci.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapc/gapc_sig.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapc/gapc_task.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapm/gapm.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapm/gapm_hci.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapm/gapm_task.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/gapm/gapm_util.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/smpc/smpc.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/smpc/smpc_api.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/smpc/smpc_crypto.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/smpc/smpc_util.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gap/smpm/smpm_api.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/attc/attc.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/attm/attm.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/attm/attm_db.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/atts/atts.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/gattc/gattc.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/gattc/gattc_task.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/gattm/gattm.c"]
src_lib += ["ble_lib/ip/ble/hl/src/gatt/gattm/gattm_task.c"]
src_lib += ["ble_lib/ip/ble/hl/src/l2c/l2cc/l2cc.c"]
src_lib += ["ble_lib/ip/ble/hl/src/l2c/l2cc/l2cc_lecb.c"]
src_lib += ["ble_lib/ip/ble/hl/src/l2c/l2cc/l2cc_pdu.c"]
src_lib += ["ble_lib/ip/ble/hl/src/l2c/l2cc/l2cc_sig.c"]
src_lib += ["ble_lib/ip/ble/hl/src/l2c/l2cc/l2cc_task.c"]
src_lib += ["ble_lib/ip/ble/hl/src/l2c/l2cm/l2cm.c"]
src_lib += ["ble_lib/ip/ble/hl/src/prf/prf_utils.c"]
src_lib += ["ble_lib/ip/ble/hl/src/rwble_hl/rwble_hl.c"]
src_lib += ["ble_lib/ip/ble/ll/src/em/em_buf.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llc/llc.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llc/llc_ch_asses.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llc/llc_hci.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llc/llc_llcp.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llc/llc_task.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llc/llc_util.c"]
src_lib += ["ble_lib/ip/ble/ll/src/lld/lld.c"]
src_lib += ["ble_lib/ip/ble/ll/src/lld/lld_evt.c"]
src_lib += ["ble_lib/ip/ble/ll/src/lld/lld_pdu.c"]
src_lib += ["ble_lib/ip/ble/ll/src/lld/lld_sleep.c"]
src_lib += ["ble_lib/ip/ble/ll/src/lld/lld_util.c"]
src_lib += ["ble_lib/ip/ble/ll/src/lld/lld_wlcoex.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llm/llm.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llm/llm_hci.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llm/llm_task.c"]
src_lib += ["ble_lib/ip/ble/ll/src/llm/llm_util.c"]
src_lib += ["ble_lib/ip/ble/ll/src/rwble/rwble.c"]
src_lib += ["ble_lib/ip/ea/src/ea.c"]
src_lib += ["ble_lib/ip/hci/src/hci.c"]
src_lib += ["ble_lib/ip/hci/src/hci_fc.c"]
src_lib += ["ble_lib/ip/hci/src/hci_msg.c"]
src_lib += ["ble_lib/ip/hci/src/hci_tl.c"]
src_lib += ["ble_lib/ip/hci/src/hci_util.c"]
src_lib += ["ble_lib/modules/h4tl/src/h4tl.c"]
src_lib += ["ble_lib/modules/ke/src/kernel.c"]
src_lib += ["ble_lib/modules/ke/src/kernel_event.c"]
src_lib += ["ble_lib/modules/ke/src/kernel_mem.c"]
src_lib += ["ble_lib/modules/ke/src/kernel_msg.c"]
src_lib += ["ble_lib/modules/ke/src/kernel_queue.c"]
src_lib += ["ble_lib/modules/ke/src/kernel_task.c"]
src_lib += ["ble_lib/modules/ke/src/kernel_timer.c"]
src_lib += ["ble_lib/plf/refip/src/arch/main/ble_arch_main.c"]

src_pub += ["ble.c"]
src_pub += ["ble_pub/ip/ble/hl/src/prf/prf.c"]
src_pub += ["ble_pub/ip/ble/profiles/sdp/src/sdp_service.c"]
src_pub += ["ble_pub/ip/ble/profiles/sdp/src/sdp_service_task.c"]
src_pub += ["ble_pub/ip/ble/profiles/comm/src/comm.c"]
src_pub += ["ble_pub/ip/ble/profiles/comm/src/comm_task.c"]
src_pub += ["ble_pub/ip/ble/profiles/FFE0/src/ffe0s.c"]
src_pub += ["ble_pub/ip/ble/profiles/FFE0/src/ffe0s_task.c"]
src_pub += ["ble_pub/modules/app/src/app_ble.c"]
src_pub += ["ble_pub/modules/app/src/app_task.c"]
src_pub += ["ble_pub/modules/app/src/app_sdp.c"]
src_pub += ["ble_pub/modules/app/src/app_sec.c"]
src_pub += ["ble_pub/modules/app/src/app_comm.c"]
src_pub += ["ble_pub/modules/app/src/app_ffe0.c"]
src_pub += ["ble_pub/modules/common/src/common_list.c"]
src_pub += ["ble_pub/modules/common/src/common_utils.c"]
src_pub += ["ble_pub/modules/common/src/RomCallFlash.c"]
src_pub += ["ble_pub/modules/dbg/src/dbg.c"]
src_pub += ["ble_pub/modules/dbg/src/dbg_mwsgen.c"]
src_pub += ["ble_pub/modules/dbg/src/dbg_swdiag.c"]
src_pub += ["ble_pub/modules/dbg/src/dbg_task.c"]
src_pub += ["ble_pub/modules/rwip/src/rwip.c"]
src_pub += ["ble_pub/modules/rf/src/ble_rf_xvr.c"]
src_pub += ["ble_pub/modules/ecc_p256/src/ecc_p256.c"]
src_pub += ["ble_pub/plf/refip/src/driver/uart/uart.c"]

path = []
path += [cwd + '/']
path += [cwd + '/ble_pub/ip/ble/hl/inc']
path += [cwd + '/ble_pub/ip/ble/profiles/comm/api']
path += [cwd + '/ble_pub/ip/ble/profiles/sdp/api']
path += [cwd + '/ble_pub/ip/ble/profiles/FFE0/api']
path += [cwd + '/ble_pub/modules/app/api']
path += [cwd + '/ble_pub/modules/ecc_p256/api']
path += [cwd + '/ble_pub/modules/common/api']
path += [cwd + '/ble_pub/modules/dbg/api']
path += [cwd + '/ble_pub/modules/rwip/api']
path += [cwd + '/ble_pub/modules/rf/api']
path += [cwd + '/ble_pub/plf/refip/src/arch']
path += [cwd + '/ble_pub/plf/refip/src/arch/boot']
path += [cwd + '/ble_pub/plf/refip/src/arch/compiler']
path += [cwd + '/ble_pub/plf/refip/src/arch/ll']
path += [cwd + '/ble_pub/plf/refip/src/build/ble_full/reg/fw']
path += [cwd + '/ble_pub/plf/refip/src/driver/reg']
path += [cwd + '/ble_pub/plf/refip/src/driver/uart']
path += [cwd + '/ble_pub/plf/refip/src/driver/ble_icu']

path += [cwd + '/ble_lib/ip/ahi/api']
path += [cwd + '/ble_lib/ip/ble/hl/api']
path += [cwd + '/ble_lib/ip/ble/hl/inc']
path += [cwd + '/ble_lib/ip/ble/hl/src/gap/gapc']
path += [cwd + '/ble_lib/ip/ble/hl/src/gap/gapm']
path += [cwd + '/ble_lib/ip/ble/hl/src/gap/smpc']
path += [cwd + '/ble_lib/ip/ble/hl/src/gap/smpm']
path += [cwd + '/ble_lib/ip/ble/hl/src/gap']
path += [cwd + '/ble_lib/ip/ble/hl/src/gatt/attc']
path += [cwd + '/ble_lib/ip/ble/hl/src/gatt/attm']
path += [cwd + '/ble_lib/ip/ble/hl/src/gatt/atts']
path += [cwd + '/ble_lib/ip/ble/hl/src/gatt']
path += [cwd + '/ble_lib/ip/ble/hl/src/gatt/gattc']
path += [cwd + '/ble_lib/ip/ble/hl/src/gatt/gattm']
path += [cwd + '/ble_lib/ip/ble/hl/src/l2c/l2cc']
path += [cwd + '/ble_lib/ip/ble/hl/src/l2c/l2cm']
path += [cwd + '/ble_lib/ip/ble/ll/src/em']
path += [cwd + '/ble_lib/ip/ble/ll/src/llc']
path += [cwd + '/ble_lib/ip/ble/ll/src/lld']
path += [cwd + '/ble_lib/ip/ble/ll/src/llm']
path += [cwd + '/ble_lib/ip/ble/ll/src/rwble']
path += [cwd + '/ble_lib/ip/ea/api']
path += [cwd + '/ble_lib/ip/em/api']
path += [cwd + '/ble_lib/ip/hci/api']
path += [cwd + '/ble_lib/ip/hci/src']
path += [cwd + '/ble_lib/modules/h4tl/api']
path += [cwd + '/ble_lib/modules/ke/api']
path += [cwd + '/ble_lib/modules/ke/src']
path += [cwd + '/ble_pub/modules/ecc_p256/api']

sys_config = os.path.join(cwd, '..', '..', 'app', 'config', 'sys_config.h')
options = LocalOptions(sys_config)

ble_lib_name = 'ble'

if (GetLocalDepend(options, 'CFG_USE_BLE_PS') == 1):
    ble_lib_name += '_ps'

if (GetDepend('RT_USING_BLE')):
	print 'using rwnx_ble: lib' + ble_lib_name + '.a'

libs = [ble_lib_name]
libpath = [cwd + '/']

cppdefines = ['CFG_SUPPORT_BLE']

if (GetLocalDepend(options, 'CFG_SUPPORT_BLE') == 1):
    group_use_lib = DefineGroup('beken_ble_lib', src_pub, depend = [''], CPPPATH = path, CPPDEFINES = cppdefines, LIBS = libs, LIBPATH = libpath)
else:
    group_use_lib = []

if (GetLocalDepend(options, 'CFG_SUPPORT_BLE') == 1):
    group_build_lib = DefineGroup('beken_ble', src_lib, depend = ['BUILD_LIB'], CPPPATH = path, CPPDEFINES = cppdefines, LIBS = libs, LIBPATH = libpath, LIBNAME = 'lib' + ble_lib_name + '.a')
else:
    group_build_lib = []

group = group_use_lib + group_build_lib

Return('group')
